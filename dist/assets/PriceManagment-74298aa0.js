import{F as W,_ as X,A as Y}from"./format-6a3f1c49.js";import{d as Z,f as t,g as ee,r as m,o as _,a as I,e as n,w as F,h as g,F as te,b as ae,u,c as oe,i as P,t as E,p as le,j as se}from"./index-eec4ad98.js";import{_ as ne}from"./_plugin-vue_export-helper-c27b6911.js";var c=(e=>(e.SavingsPeriod="貯蓄期間",e.MoneyReceived="手取の月収",e.Bouns="ボーナス(1年の合計)",e.FixedCost="固定費(家賃、光熱費、通信費、サブスクリプション、積み立て投資などなど・・・)",e.Loan="ローン(教育、車)",e.Privates="プライベート(月に自身が自由に使える)",e.Insurance="保険(生命保険、任意保険など)",e))(c||{}),L=(e=>(e.InterServerError="サーバーエラー",e.ErrorMessage="サーバーダウン。もしくは、サーバー側で何か不具合が発生しました。",e))(L||{}),p=(e=>(e.Date="Date",e.Number="number",e.Submit="submit",e.Success="success",e.Error="error",e))(p||{});const re=e=>(le("data-v-7999a962"),e=e(),se(),e),ce={key:0},ue=re(()=>g("div",{class:"price-title"},[g("h1",null,"貯金額算出")],-1)),ve={class:"text-h5 text--primary"},de={class:"text-h5 text--primary"},ie={class:"text-h5 text--primary"},me={key:0},_e={key:1},pe={key:1},ge=Z({__name:"PriceManagment",setup(e){const k=t("sumitFpInfo"),V=t("result"),w=t("date"),B=W.formatDate(new Date),J=t(1),s=t(),N=t(!1),f=t(0),S=t(0),y=t(0),h=t(0),b=t(0),x=t(0),A=t(0),R=t(0),D=t(0),O=t(!1),T=t(L.InterServerError),C=t(L.ErrorMessage),K=t([{label:c.MoneyReceived,vModel:f},{label:c.Bouns,vModel:S},{label:c.FixedCost,vModel:y},{label:c.Loan,vModel:h},{label:c.Privates,vModel:b},{label:c.Insurance,vModel:x}]),U=()=>{const a=localStorage.getItem(k.value),o=localStorage.getItem(w.value);if(o){const l=JSON.parse(o);N.value=!0,s.value=l.date}if(a){const l=JSON.parse(a);f.value=l.moneyReceived,S.value=l.bouns,y.value=l.fixedCost,h.value=l.loan,b.value=l.private,x.value=l.insurance}},j=()=>{const a=localStorage.getItem(V.value);if(a){const o=JSON.parse(a);A.value=o.leftAmount,R.value=o.totalAmount,D.value=o.totalRangeAmount}},q=()=>{const a={moneyReceived:f.value,bouns:S.value,fixedCost:y.value,loan:h.value,private:b.value,insurance:x.value},o={date:s.value??""};localStorage.setItem(w.value,JSON.stringify(o)),localStorage.setItem(k.value,JSON.stringify(a)),$()},$=async()=>{const a=[];a.push("money_received="+f.value),a.push("bouns="+S.value),a.push("fixed_cost="+y.value),a.push("loan="+h.value),a.push("private="+b.value),a.push("insurance="+x.value);const o="?"+a.join("&");console.log(o);try{const v=(await Y.getPriceManagement(o)).data,r=v.message.result.left_amount,d=v.message.result.total_amount;s.value?(J.value=G(B,s.value),N.value=!0):N.value=!1,A.value=r,R.value=d,D.value=r*J.value;const M={leftAmount:r,totalAmount:d,totalRangeAmount:D.value};localStorage.setItem(V.value,JSON.stringify(M))}catch(l){O.value=!0,console.error("Error fetching data:",l)}},z=()=>{f.value=0,S.value=0,y.value=0,h.value=0,b.value=0,A.value=0,R.value=0,D.value=0,x.value=0,s.value="",localStorage.clear()},G=(a,o)=>{const l=new Date(a),v=new Date(o),r=l.getTime(),M=v.getTime()-r;return Math.round(M/(1e3*60*60*24*30))};return ee(()=>{U(),j()}),(a,o)=>{const l=m("v-text-field"),v=m("v-col"),r=m("v-btn"),d=m("v-card-actions"),M=m("v-card-text"),H=m("v-card");return O.value?(_(),I("div",pe,[n(X,{color:u(p).Error,title:T.value,text:C.value},null,8,["color","title","text"])])):(_(),I("div",ce,[ue,n(v,{cols:"2",md:"2"},{default:F(()=>[n(l,{modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=i=>s.value=i),label:u(c).SavingsPeriod,type:u(p).Date,min:u(B),clearable:""},null,8,["modelValue","label","type","min"])]),_:1}),g("div",null,[(_(!0),I(te,null,ae(K.value,i=>(_(),oe(l,{key:i.label,modelValue:i.vModel,"onUpdate:modelValue":Q=>i.vModel=Q,label:i.label,type:u(p).Number},null,8,["modelValue","onUpdate:modelValue","label","type"]))),128)),n(r,{class:"me-4",type:u(p).Submit,color:u(p).Success,onClick:q},{default:F(()=>[P(" 計算 ")]),_:1},8,["type","color"]),n(r,{onClick:z,color:"blue-grey"},{default:F(()=>[P(" クリア ")]),_:1})]),n(H,{class:"mx-auto","max-width":"370"},{default:F(()=>[n(M,{class:"card-style"},{default:F(()=>[g("p",ve," 月の貯蓄額 "+E(A.value.toLocaleString())+" 円 ",1),n(d),g("p",de," 年の貯蓄額 "+E(R.value.toLocaleString())+" 円 ",1),n(d),g("div",ie,[s.value&&N.value?(_(),I("p",me," 現在～"+E(s.value.slice(0,4)+"/"+s.value.slice(5,7)+"/"+s.value.slice(-2))+"までの貯蓄額 "+E(D.value.toLocaleString())+" 円 ",1)):(_(),I("p",_e," 現在～までの貯蓄額 0 円 "))])]),_:1})]),_:1})]))}}});const he=ne(ge,[["__scopeId","data-v-7999a962"]]);export{he as default};
